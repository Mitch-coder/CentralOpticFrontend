<mat-sidenav-container class="example-container">
    <mat-sidenav-content>
        <div class="example-content">
            <section *ngIf="getEventBtnClickHeader()">
                <section>
                    <h1>Lista de factura actuales</h1>
                    <app-table [data]="myData$" [columns]="tableColumns"></app-table>
                </section>
                <section>

                </section>
            </section>
            <section *ngIf="!getEventBtnClickHeader()">
                <ng-container *ngTemplateOutlet="formCreate">
                </ng-container>
            </section>
        </div>

    </mat-sidenav-content>
</mat-sidenav-container>





<ng-template #formCreate>
    <div class="card">
        <div class="card-body">
            <div class="container-header">
                <h1 class="title">
                    Actualizar informacion del producto
                </h1>
            </div>
            <form [formGroup]="formCreateData">

                <div class="content-select">
                    <div class="mb-2 container-select" #input>
                        <label class="form-label">
                            Empleado
                        </label>
                        <input type="text" formControlName="empleado" class="form-control form-input"
                            placeholder="Seleccione el empleado" [(ngModel)]="Empleado.nombres">
                        <i class="fa-solid fa-user-tie form-input-icon"></i>
                        <div class="alert 1alert-danger mt-1"
                            [hidden]="formGetDataCreate('empleado').valid || (formGetDataCreate('empleado').pristine)">
                            El campo no puede estar vacio
                        </div>
                    </div>
                    <button mat-fab extended class="btn-add btn-primary" (click)="openDialogWithTemplate(empleado)">
                        <!-- <i class="fa-regular fa-hand-pointer"></i> -->
                        <i class="fa-solid fa-users-line"></i>
                    </button>
                </div>

                <div class="content-select">
                    <div class="mb-2 container-select" #input>
                        <label class="form-label">
                            Cliente
                        </label>
                        <input type="text" formControlName="cliente" class="form-control form-input"
                            placeholder="Seleccione el cliente" [(ngModel)]="Cliente.nombres">
                        <!--[(ngModel)]="OjoIzquierdo">-->
                        <i class="fa-regular fa-circle-user form-input-icon"></i>
                        <div class="alert 1alert-danger mt-1"
                            [hidden]="formGetDataCreate('cliente').valid || (formGetDataCreate('cliente').pristine)">
                            El campo no puede estar vacio
                        </div>
                    </div>
                    <button mat-fab extended class="btn-add btn-primary" (click)="openDialogWithTemplate(cliente)">
                        <!-- <i class="fa-regular fa-hand-pointer"></i> -->
                        <i class="fa-solid fa-users-rectangle"></i>
                    </button>
                </div>

                <div class="container-header">
                    <h1 class="title">
                        Productos
                    </h1>
                    <button mat-fab extended class="btnProducto btn-primary"
                        (click)="openDialogWithTemplate(selectType)">
                        AÃ±adir producto
                        <i class="fa-solid fa-cart-plus"></i>
                    </button>
                </div>

                <!-- <ng-container *ngTemplateOutlet="pp2">

                </ng-container> -->

                <div class="mb-2" *ngIf="detalleFacturaItems.length>0">
                    <!-- <app-table-input [data]="detalleFacturaItems">

                    </app-table-input> -->
                    <ng-container *ngTemplateOutlet="table">

                    </ng-container>
                </div>

                <div class="mb-2" #input>
                    <label class="form-label">
                        Fecha Emision
                    </label>
                    <input type="text" formControlName="fechaEmision" class="form-control form-input"
                        placeholder="Fecha de emision" [(ngModel)]="FechaFactura.fechaEmision" readonly>
                    <i class="fa-solid fa-calendar-days form-input-icon"></i>
                    <div class="alert 1alert-danger mt-1"
                        [hidden]="formGetDataCreate('fechaEmision').valid || (formGetDataCreate('fechaEmision').pristine)">
                        La Fecha no puede estar vacia
                    </div>
                </div>


                <div class="container-header">
                    <div class="mb-2 form-content-input" #input>
                        <label class="form-label">
                            Descuento *
                        </label>
                        <input type="number" formControlName="descuento" class="form-control form-input"
                            placeholder="Digite el descuento" [(ngModel)]="Factura.descuento">
                        <!-- <i class="fa-solid fa-glasses form-input-icon"></i> -->
                        <i class="fa-solid fa-coins form-input-icon"></i>
                        <div class="alert alert-danger mt-1"
                            [hidden]="formGetDataCreate('descuento').valid || (formGetDataCreate('descuento').pristine)">
                            El descuento no puede estar vacio
                        </div>
                    </div>
                    <div class="mb-2 form-content-input" #input>
                        <label class="form-label">
                            Impuesto*
                        </label>
                        <input type="number" formControlName="impuesto" class="form-control form-input"
                            placeholder="Digite el Impuesto" [(ngModel)]="Factura.impuestos">
                        <!-- <i class="fa-solid fa-glasses "></i> -->
                        <i class="fa-solid fa-coins form-input-icon"></i>
                        <div class="alert alert-danger mt-1"
                            [hidden]="formGetDataCreate('impuesto').valid || (formGetDataCreate('impuesto').pristine)">
                            El impuesto no puede estar vacio
                        </div>
                    </div>
                </div>


                <div class="mb-2" #input>
                    <label class="form-label">
                        Monto a pagar
                    </label>
                    <input type="number" formControlName="monto" class="form-control form-input"
                        placeholder="Monto a pagar" [(ngModel)]="Pago.monto">
                    <!-- <i class="fa-solid fa-glasses "></i> -->
                    <i class="fa-solid fa-dollar-sign form-input-icon"></i>
                    <!-- <div class="alert alert-danger mt-1"
                        [hidden]="formGetDataCreate('monto').valid || (formGetDataCreate('monto').pristine)">
                        El monto no puede estar vacio
                    </div> -->
                </div>

                <button class="btn btn-primary" #btnEnviar [disabled]="formCreateData.invalid"
                    (click)="loadConfirmationDataCreate()">
                    Agregar
                </button>

            </form>
        </div>
    </div>
</ng-template>


<!-- la tabla que mostrara los datos -->
<ng-template #table>
    <div class="table-container">
        <table mat-table [dataSource]="detalleFacturaItemsList" matSort>
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
                <td mat-cell *matCellDef="let row"> {{row.id}} </td>
            </ng-container>

            <ng-container matColumnDef="tipoItems">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Tipo </th>
                <td mat-cell *matCellDef="let row"> {{row.tipoItems}}</td>
            </ng-container>

            <ng-container matColumnDef="codProducto">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Producto </th>
                <td mat-cell *matCellDef="let row"> {{row.codProducto}}</td>
            </ng-container>

            <ng-container matColumnDef="descripcion">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Descripcion </th>
                <td mat-cell *matCellDef="let row"> {{row.descripcion}}</td>
            </ng-container>

            <ng-container matColumnDef="cantidad">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Cantidad </th>
                <td mat-cell *matCellDef="let row"> {{row.cantidad}}</td>
            </ng-container>

            <ng-container matColumnDef="precioUni">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Precio </th>
                <td mat-cell *matCellDef="let row"> {{row.precioUni}}</td>
                <td mat-footer-cell *matFooterCellDef> {{ 0 }} </td>
            </ng-container>

            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Action </th>
                <td mat-cell *matCellDef="let row">
                    <button mat-icon-button color="primary" (click)="openEditForm(row,updateItems)">
                        <mat-icon>edit</mat-icon>
                    </button>
                    <button mat-icon-button color="warn" (click)="deleteEmployee(row)">
                        <mat-icon>delete</mat-icon>
                    </button>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            <!-- <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true"></tr> -->
        </table>
    </div>

</ng-template>

<ng-template #updateItems>
    <div class="card">
        <div class="card-body">
            <div class="container-header">
                <h1 class="title">
                    Actualizar informacion del producto
                </h1>
                <button mat-fab extended class="btnUpdate btn-danger" (click)="cancelDialogResult()">
                    Cerrar
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            <form [formGroup]="formUpdateItems">

                <div class="mb-2" #input>
                    <label class="form-label">
                        Producto
                    </label>
                    <input type="text" formControlName="descripcion" class="form-control form-input"
                        placeholder="Ingrese el producto" [(ngModel)]="detalleItems.descripcion" readonly>
                    <i class="fa-solid fa-calendar-days form-input-icon"></i>
                    <div class="alert 1alert-danger mt-1"
                        [hidden]="formGetDataUpdateItems('descripcion').valid || (formGetDataUpdateItems('descripcion').pristine)">
                        El producto no puede estar vacio
                    </div>
                </div>

                <div class="mb-2" #input>
                    <label class="form-label">
                        Cantidad
                    </label>
                    <input type="number" formControlName="cantidad" class="form-control form-input"
                        placeholder="Ingrese la cantidad de productos a facturar" [(ngModel)]="detalleItems.cantidad">
                    <i class="fa-solid fa-calendar-days form-input-icon"></i>
                    <div class="alert 1alert-danger mt-1"
                        [hidden]="formGetDataUpdateItems('cantidad').valid || (formGetDataUpdateItems('cantidad').pristine)">
                        La cantidad no puede estar vacia
                    </div>
                </div>

                <div class="mb-2" #input>
                    <label class="form-label">
                        Precio unitario
                    </label>
                    <input type="number" formControlName="precioUni" class="form-control form-input"
                        placeholder="Ingrese el precion unitario" [(ngModel)]="detalleItems.precioUni">
                    <i class="fa-solid fa-glasses form-input-icon"></i>
                    <div class="alert alert-danger mt-1"
                        [hidden]="formGetDataUpdateItems('precioUni').valid || (formGetDataUpdateItems('precioUni').pristine)">
                        El precio no puede estar vacio
                    </div>
                </div>

                <button class="btn btn-primary" #btnEnviar [disabled]="formUpdateItems.invalid"
                    (click)="loadConfirmationUpdateItem()">
                    Actualizar
                </button>
            </form>
        </div>
    </div>
</ng-template>

<!-- 

    'id',
    'tipoItems',
    'codProducto',
    'descripcion',
    'cantidad',
    'precioUni',
    'action'

 -->


<ng-template #pp2>
    <div class="container-products mb-2">
        <div class="content-products">
            <h2 class="items items-id">
                ID
            </h2>
            <h2 class="items items-type">
                Tipo
            </h2>
            <h2 class="items items-descripcion">
                Descripcion
            </h2>
            <h2 class="items items-cantidad">
                Cantidad
            </h2>
            <h2 class="items items-precio">
                Precio
            </h2>
            <h2 class="items items-precio">
                Accion
            </h2>
        </div>

        <ng-container *ngFor="let element of detalleFacturaItems">
            <div>

            </div>
        </ng-container>
    </div>
</ng-template>


<!-- clientes -->
<ng-template #cliente>
    <app-table-simple [data]="clienteList" [columns]="tableColumnsCliente"
        (selectItemsCell)="resultDataTableCliente($event)" (cancelTable)="cancelDialogResult()">
    </app-table-simple>
</ng-template>

<!-- Empleado -->
<ng-template #empleado>
    <app-table-simple [data]="empleadoList" [columns]="tableColumnsEmpleado"
        (selectItemsCell)="resultDataTableEmpleado($event)" (cancelTable)="cancelDialogResult()">
    </app-table-simple>
</ng-template>

<!-- ordenPedido -->
<ng-template #ordenPedido>
    <app-table-simple [data]="productoAuxiliarList" [columns]="tableColumnsOrdenPedido"
        (selectItemsCell)="resultDataTableOrdenPedido($event)" (cancelTable)="cancelDialogResult()">
    </app-table-simple>
</ng-template>

<!-- producto -->
<ng-template #producto>
    <app-table-simple [data]="tableDataProducto" [columns]="tableColumnsProducto"
        (selectItemsCell)="resultDataTableProducto($event)" (cancelTable)="cancelDialogResult()">
    </app-table-simple>
</ng-template>


<!-- productos -->

<ng-template #selectType>
    <div class="">

        <div class="container-header">
            <button class="btnType formInputType" [ngClass]="getBtnClick('left')"
                (click)="setBtnClick('left')">Productos</button>

            <button class="btnType formInputType" [ngClass]="getBtnClick('rigth')"
                (click)="setBtnClick('rigth')">Pedidos</button>
        </div>
        <section *ngIf="getBtnClick('left') === 'active'">
            <ng-container *ngTemplateOutlet="producto">

            </ng-container>
        </section>
        <section *ngIf="getBtnClick('rigth') === 'active'">
            <ng-container *ngTemplateOutlet="ordenPedido">

            </ng-container>
        </section>
    </div>
</ng-template>